# Telegram Sender

Простой и настраиваемый скрипт для автоматической циклической отправки сообщений в указанные чаты Telegram.

## Возможности

- **Циклическая отправка**: Отправляет сообщения по списку целей и начинает заново.
- **Настраиваемые цели**: Указывайте ID чатов, каналов или `username` пользователей.
- **Гибкий текст сообщений**: Для каждой цели можно задать свой уникальный текст.
- **Поддержка Markdown**: Форматируйте текст сообщений (жирный, курсив и т.д.).
- **Суточный лимит**: Автоматически останавливается при достижении лимита сообщений в день и возобновляет работу на следующий день.
- **Настраиваемая задержка**: Установите паузу между отправкой сообщений, чтобы избежать спам-фильтров.
- **Сохранение состояния**: Скрипт запоминает, сколько сообщений уже отправлено за сегодня, даже после перезапуска.
- **Утилита для получения ID**: Встроенная команда для получения списка всех ваших чатов и их ID.

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/your-username/telegram-sender.git
    cd telegram-sender
    ```

2.  **Создайте и активируйте виртуальное окружение (рекомендуется):**
    ```bash
    python -m venv venv
    # Windows
    venv\Scripts\activate
    # macOS / Linux
    source venv/bin/activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

## Настройка

1.  **Получите API ID и API Hash:**
    - Перейдите на сайт [my.telegram.org](https://my.telegram.org) и войдите в свой аккаунт.
    - Откройте раздел "API development tools" и создайте новое приложение.
    - Вы получите `api_id` и `api_hash`.

2.  **Создайте файл конфигурации:**
    - Скопируйте файл `config.example.json` и переименуйте его в `config.json`.
    ```bash
    cp config.example.json config.json
    ```

3.  **Отредактируйте `config.json`:**
    - `api_id` и `api_hash`: Вставьте значения, полученные на сайте Telegram.
    - `session_name`: Имя файла сессии (можно оставить по умолчанию).
    - `daily_message_limit`: Максимальное количество сообщений в сутки.
    - `delay_seconds`: Пауза в секундах между отправкой сообщений.
    - `targets`: Список целей для отправки.
        - `chat_id`: ID чата (число), `username` (например, `"some_user"`) или `"me"` (для отправки в "Избранное").
        - `message_text`: Текст сообщения с поддержкой Markdown.

## Использование

### 1. Получение ID чатов (если необходимо)

Если вы не знаете ID нужного чата или канала, запустите скрипт с флагом `--get-chats`.

```bash
python run.py --get-chats
```

После выполнения в корне проекта появится файл `chats.txt` со списком всех ваших диалогов и их ID.

### 2. Запуск основной рассылки

Для запуска процесса отправки сообщений выполните команду:

```bash
python run.py
```

При первом запуске скрипт попросит вас ввести номер телефона, код из Telegram и, возможно, пароль двухфакторной аутентификации. После этого будет создан файл сессии (`my_sender_session.session`), и в дальнейшем вход будет происходить автоматически.

Скрипт будет работать в бесконечном цикле, отправляя сообщения согласно вашему `config.json`. Для остановки нажмите `Ctrl+C`.

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл [LICENSE](LICENSE) для подробностей.
